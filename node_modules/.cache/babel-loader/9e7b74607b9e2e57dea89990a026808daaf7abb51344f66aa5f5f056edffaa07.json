{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/djman/OneDrive/Documents/FR Files/React/Integration/day 3/realgrande-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/djman/OneDrive/Documents/FR Files/React/Integration/day 3/realgrande-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/djman/OneDrive/Documents/FR Files/React/Integration/day 3/realgrande-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pass=_useState4[0],setPassword=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loginSuccess=_useState6[0],setLoginSuccess=_useState6[1];var navigate=useNavigate();//update state with email -\nvar onChangeEmail=function onChangeEmail(e){setEmail(e.target.value);};//update state with password -\nvar onChangePassword=function onChangePassword(e){setPassword(e.target.value);};var submitHandler=function submitHandler(e){e.preventDefault();//axios post\nfunction checkLogin(){return _checkLogin.apply(this,arguments);}function _checkLogin(){_checkLogin=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resp,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// post to the backend, the email and password\n//get email and password from input fields    \nconsole.log('*************************');console.log(email,pass);_context.next=4;return axios.post('http://localhost:3002/login',{email:email,pass:pass});case 4:resp=_context.sent;console.log(resp);//result\n//resp status 200 success, status 401-- bad request            \ndata=resp.data;if(data==''){//set a flag to true\nsetLoginSuccess(false);}else{setLoginSuccess(true);localStorage.setItem('name',data.fname);localStorage.setItem('email',data.email);//check to see if it is a customer or realtor\n//if customer then navigate to home page else to InquiryList\nif(data.role==\"realtor\"){navigate('/inquiries');}else{navigate('/');}}case 8:case\"end\":return _context.stop();}},_callee);}));return _checkLogin.apply(this,arguments);}checkLogin();// console say hello, authenticate successful\n};return/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-50\",children:[\"Login Component\",!loginSuccess&&/*#__PURE__*/_jsx(\"h5\",{className:\"text-warning\",children:\" Invalid Login Credentials. Please try again \"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputEmail1\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",onChange:onChangeEmail,className:\"form-control\",id:\"email\",name:\"email\",\"aria-describedby\":\"emailHelp\"}),/*#__PURE__*/_jsx(\"div\",{id:\"emailHelp\",className:\"form-text\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"exampleInputPassword1\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:onChangePassword,className:\"form-control\",id:\"password\",name:\"password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]})]})});};export default Login;","map":{"version":3,"names":["useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","pass","setPassword","_useState5","_useState6","loginSuccess","setLoginSuccess","navigate","onChangeEmail","e","target","value","onChangePassword","submitHandler","preventDefault","checkLogin","_checkLogin","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resp","data","wrap","_callee$","_context","prev","next","console","log","post","sent","localStorage","setItem","fname","role","stop","class","children","className","onSubmit","for","type","onChange","id","name"],"sources":["C:/Users/djman/OneDrive/Documents/FR Files/React/Integration/day 3/realgrande-frontend/src/components/Login.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport axios from 'axios';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n\r\nconst Login = () => {\r\n\r\n\r\n    let [email,setEmail] = useState('');\r\n    let [pass,setPassword] = useState('');\r\n    let [loginSuccess,setLoginSuccess] = useState(true);\r\n\r\n\r\n    let navigate = useNavigate();\r\n\r\n\r\n    //update state with email -\r\n    let onChangeEmail = (e) => {\r\n            setEmail(e.target.value);\r\n    }\r\n\r\n\r\n    //update state with password -\r\n    let onChangePassword = (e) => {\r\n            setPassword(e.target.value);\r\n    }\r\n\r\n\r\n    let submitHandler = (e)=>{    \r\n        e.preventDefault();  \r\n        //axios post\r\n        async function checkLogin(){    \r\n            // post to the backend, the email and password\r\n                //get email and password from input fields    \r\n                console.log('*************************');\r\n                console.log(email,pass)   ;\r\n            let resp = await axios.post('http://localhost:3002/login',{email,pass});\r\n            console.log(resp);\r\n            //result\r\n            //resp status 200 success, status 401-- bad request            \r\n            let data = resp.data;        \r\n            if(data=='')   {\r\n                //set a flag to true\r\n                setLoginSuccess(false);                \r\n            }\r\n            else {\r\n                setLoginSuccess(true);\r\n                localStorage.setItem('name',data.fname);\r\n                localStorage.setItem('email',data.email);\r\n                //check to see if it is a customer or realtor\r\n                //if customer then navigate to home page else to InquiryList\r\n                if(data.role == \"realtor\") {\r\n                    navigate('/inquiries');\r\n                }\r\n                else {\r\n                    navigate('/');\r\n                }\r\n            }        \r\n           \r\n        }\r\n        checkLogin();\r\n\r\n\r\n\r\n\r\n// console say hello, authenticate successful\r\n    }\r\n\r\n\r\n    return (\r\n        <div class=\"container\">\r\n            <div className=\"w-50\">\r\n            Login Component\r\n            {\r\n                (!loginSuccess) && <h5 className=\"text-warning\"> Invalid Login Credentials. Please try again </h5>\r\n            }\r\n            <form onSubmit={submitHandler}>\r\n                <div className=\"mb-3\">\r\n                    <label for=\"exampleInputEmail1\" className=\"form-label\">Email address</label>\r\n                    <input type=\"email\" onChange={onChangeEmail} className=\"form-control\" id=\"email\" name=\"email\" aria-describedby=\"emailHelp\" />\r\n                    <div id=\"emailHelp\" className=\"form-text\">We'll never share your email with anyone else.</div>\r\n                </div>\r\n                <div className=\"mb-3\">\r\n                    <label for=\"exampleInputPassword1\" className=\"form-label\">Password</label>\r\n                    <input type=\"password\" onChange ={onChangePassword} className=\"form-control\" id=\"password\" name=\"password\"/>\r\n                </div>\r\n               \r\n                <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\r\n                </form>\r\n        </div>\r\n    </div>\r\n\r\n\r\n     );\r\n}\r\n \r\n\r\n\r\n\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}